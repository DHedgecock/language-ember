{
  "scopeName": "internal.docblock",
  "comment": "This set of patterns matches jsdoc/yuidoc/docblock style comment blocks with the form /** */. Because these comments are typically parsed as markdown by their respective tools, there are patterns here to match on markdown elements (currently code blocks and headers). Ordering of the code blocks' include is important because they match on very similar things.",
  "patterns": [
    { "include": "#docblock-block" }
  ],
  "repository": {
    "docblock-block": {
      "comment": "Capture docblock comments",
      "name": "comment.block.documentation.js",
      "begin": "\\s*((/\\*\\*))(?!/)",
      "end": "(\\s*(\\*/))",
      "captures": {
        "1": { "name": "comment.block.documentation.js" },
        "2": { "name": "punctuation.definition.comment.js" }
      },
      "patterns": [
          { "include": "source.glimmer" },
          { "include": "#markdown-header" },
          { "include": "#docblock-line" },
          { "include": "#docblock-tag" },
          { "include": "#markdown-italics" },
          { "include": "#markdown-bold" },
          { "include": "#markdown-glimmer-code-block" },
          { "include": "#markdown-code-block" },
          { "include": "#markdown-inline-code-block" }
      ]
    },
    "markdown-header": {
      "comment": "Captures markdown headers, MUST be matched before line b/c it checks for the start of the line to prevent header matching on random hashes in text",
      "name": "comment.markup.heading.js",
      "begin": "^([*\\s]*)(#{1,6})(\\s*)",
      "end": "$",
      "captures": {
        "1": { "name": "comment.block.documentation.punctuation.js" },
        "2": { "name": "markup.heading.gfm"}
      }
    },
    "docblock-line": {
      "comment": "Captures stars at each docblock line start",
      "name": "comment.block.documentation.punctuation.js",
      "match": "^(\\s*(\\*)\\s{0,1})"
    },
    "docblock-tag": {
      "comment": "Matches docblock tags",
      "name": "entity.tag.docblock",
      "begin": "(@)(\\w*)",
      "end": "$",
      "captures": {
        "1": { "name": "storage.type.class.doc" },
        "2": { "name": "storage.type.class.doc" }
      }
    },
    "markdown-italics": {
      "comment": "matches markdown _italics_ elements",
      "name": "markup.italics.gfm",
      "match": "(_)([\\w\\s:]*)(_)",
      "captures": {
        "1": { "name": "punctuation.definition.begin.italics.gfm" },
        "2": { "name": "markup.italics.gfm" },
        "3": { "name": "punctuation.definition.end.italics.gfm" }
      }
    },
    "markdown-bold": {
      "comment": "matches markdown *bold* elements",
      "name": "markup.bold.gfm",
      "match": "(\\*)([\\w\\s:]*)(\\*)",
      "captures": {
        "1": { "name": "punctuation.definition.begin.bold.gfm" },
        "2": { "name": "markup.bold.gfm" },
        "3": { "name": "punctuation.definition.end.bold.gfm" }
      }
    },
    "markdown-glimmer-code-block": {
      "comment": "captures markdown code blocks with glimmer contents",
      "name": "markup.glimmer.code.block.gfm",
      "begin": "(`{3})(handlebars|glimmer|htmlbars)",
      "end": "(\\1)",
      "captures": {
        "1": { "name": "punctuation.begin.code.block.gfm" },
        "2": { "name": "entity.name.tag.gfm" },
        "3": { "name": "punctuation.end.code.block.gfm" }
      },
      "patterns": [
        { "include": "#docblock-line" },
        { "include": "source.glimmer" }
      ]
    },
    "markdown-code-block": {
      "comment": "captures markdown code blocks with backticks",
      "name": "markup.code.block.gfm",
      "begin": "(`{3})",
      "end": "(\\1)",
      "captures": {
        "1": { "name": "punctuation.begin.code.block.gfm" },
        "2": { "name": "punctuation.end.code.block.gfm" }
      },
      "patterns": [
        { "include": "#docblock-line" }
      ]
    },
    "markdown-inline-code-block": {
      "comment": "captures markdown code blocks with single backticks",
      "name": "markup.inline.code.block.gfm",
      "begin": "(`{1})",
      "end": "(\\1)",
      "captures": {
        "1": { "name": "punctuation.begin.code.block.gfm" },
        "2": { "name": "punctuation.end.code.block.gfm" }
      }
    }
  }
}
